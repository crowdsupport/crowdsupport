<div class="container place">
    <div class="row">
        <nav class="navbar">
            <p class="navbar-text">{{place.name}} @ {{place.location}}
                ({{place.city.name}})
            </p>

            <div class="navbar-right options">
                <span class="btn-group filtertoggle" data-toggle="buttons">
                    <label class="btn btn-default active">
                        <input type="checkbox" checked="checked"/> Open
                    </label>
                    <label class="btn btn-warning active">
                        <input type="checkbox" checked="checked"/> Waiting for confirmation
                    </label>
                    <label class="btn btn-success">
                        <input type="checkbox"/> Done
                    </label>
                </span>
                <span class="wrench" ng-if="inTeam()">
                    <a href="/support/{{place.city.state.identifier}}/{{place.city.identifier}}/{{place.identifier}}/manage"><span uib-tooltip="Manage place" class="btn glyphicon glyphicon-wrench"></span></a>
                    <a href="" ng-click="addRequest()"><span uib-tooltip="Add request" tooltip-append-to-body="true" class="btn glyphicon glyphicon-plus"></span></a>
                </span>
            </div>
        </nav>
    </div>

    <div class="row" id="donationrequests" ng-controller="DonationRequestsCtrl">
        <div ng-repeat="req in donationRequests" class="box col-md-2 col-sm-4 col-xs-12">
            <div>
                <h3>{{req.title}}</h3>

                <p>{{req.description}}</p>

                <div>Posted: <span class="time-ago" title="{{req.createdDateTime}}"></span></div>
                <div ng-show="req.validToDateTime">Until: {{req.validToDateTime}}</div>
                <div ng-if="req.quantity > 0">
                    Quantity: {{req.quantity}}
                </div>

                <div>
                    <div ng-show="req.comments">
                        <div ng-repeat="comment in req.comments" class="box">
                            <p><b>{{comment.author.username}}</b>: {{comment.text}}</p>

                            <p ng-if="comment.quantity > 0">Quantity: {{comment.quantity}}</p>
                        </div>
                    </div>

                    <div ng-show="$root.user">
                        <form ng-submit="req.sendComment()" name="commentForm">
                            <input type="text" placeholder="New comment..." ng-model="req.commentText"/>
                            <button ng-disabled="req.commentText.length === 0">Send</button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>